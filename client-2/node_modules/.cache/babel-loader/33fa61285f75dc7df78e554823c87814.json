{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{logOut}from\"../auth/authSlice\";import{Link}from\"react-router-dom\";import{Navigate}from\"react-router-dom\";import{listAsyncThunk,startProcessAsyncThunk,getAssetsAsyncThunk}from\"./mainSlice\";import{resetState}from\"../asset/assetSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Main(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.main;}),processes=_useSelector.processes,pending=_useSelector.pending,assets=_useSelector.assets,apiNotSet=_useSelector.apiNotSet;var symbol=\"\";useEffect(function(){dispatch(listAsyncThunk());dispatch(getAssetsAsyncThunk());dispatch(resetState());//eslint-disable-next-line\n},[]);var ProcessElt=function ProcessElt(props){return/*#__PURE__*/_jsxs(\"div\",{className:\"container__assets__list__elt\",children:[/*#__PURE__*/_jsx(Link,{to:\"/asset/\".concat(props.name),className:\"container__assets__list__elt--name\",children:props.name}),props.running?/*#__PURE__*/_jsx(\"div\",{className:\"container__assets__list__elt--status  green-status\"}):/*#__PURE__*/_jsx(\"div\",{className:\"container__assets__list__elt--status red-status\"})]});};var handleStart=function handleStart(){dispatch(startProcessAsyncThunk({name:symbol}));};if(!localStorage.getItem(\"token\"))return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});if(pending){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-spinner\"})})});}else if(apiNotSet){return/*#__PURE__*/_jsx(Navigate,{to:\"/parameters\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container__nav\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/parameters\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-gear\"}),\"Parameters\"]}),/*#__PURE__*/_jsxs(Link,{to:\"/\",onClick:function onClick(){return dispatch(logOut());},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-arrow-right-from-bracket\"}),\"Log Out\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container__assets\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container__assets__add\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return symbol=e.target.value;},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Choose a Bot\"}),assets.map(function(value,key){return/*#__PURE__*/_jsx(\"option\",{children:value},key);})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleStart();},children:\"Start\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container__assets__list\",children:processes.map(function(value,key){return/*#__PURE__*/_jsx(ProcessElt,{name:value.name,running:value.running},key);})})]})]});}","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","logOut","Link","Navigate","listAsyncThunk","startProcessAsyncThunk","getAssetsAsyncThunk","resetState","Main","dispatch","state","main","processes","pending","assets","apiNotSet","symbol","ProcessElt","props","name","running","handleStart","localStorage","getItem","e","target","value","map","key"],"sources":["/home/souaguen/workdir/CryptoBot_MicroServices/client-2/src/app/features/main/Main.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logOut } from \"../auth/authSlice\";\nimport { Link } from \"react-router-dom\";\nimport { Navigate } from \"react-router-dom\";\nimport { listAsyncThunk, startProcessAsyncThunk, getAssetsAsyncThunk } from \"./mainSlice\";\nimport { resetState } from \"../asset/assetSlice\";\n\nexport function Main() {\n    const dispatch = useDispatch();\n    const { processes, pending, assets, apiNotSet } = useSelector((state) => state.main);\n    let symbol = \"\";\n    useEffect(() => {\n        dispatch(listAsyncThunk());\n        dispatch(getAssetsAsyncThunk());\n        dispatch(resetState());\n        //eslint-disable-next-line\n    }, []);\n\n    const ProcessElt = (props) => (\n        <div className=\"container__assets__list__elt\">\n            <Link to={`/asset/${props.name}`} className=\"container__assets__list__elt--name\">{props.name}</Link>\n            {(props.running) ?\n            <div className=\"container__assets__list__elt--status  green-status\"></div> \n            : <div className=\"container__assets__list__elt--status red-status\"></div>\n            }\n        </div>\n    );\n\n    const handleStart = () => {\n        dispatch(startProcessAsyncThunk({\n            name: symbol,\n        }));\n    };\n\n    if (!localStorage.getItem(\"token\"))\n        return (<Navigate to=\"/login\"/>);\n    if (pending) { \n        return (\n            <div className=\"container\">\n                <div className=\"spinner\">\n                    <i className=\"fa-solid fa-spinner\"></i>\n                </div>\n            </div>\n        );\n    } else if (apiNotSet) { return (<Navigate to=\"/parameters\"/>); }\n    return (\n        <div className=\"container\">\n            <div className=\"container__nav\">\n                <Link to=\"/parameters\">\n                    <i className=\"fa-solid fa-gear\"></i>\n                    Parameters\n                </Link>\n                <Link to=\"/\" onClick={() => dispatch(logOut())}>\n                    <i className=\"fa-solid fa-arrow-right-from-bracket\"></i>\n                    Log Out\n                </Link>\n            </div>\n            <div className=\"container__assets\">\n                <div className=\"container__assets__add\">\n                    <select onChange={(e) => symbol = e.target.value}>\n                        <option>Choose a Bot</option>\n                        {assets.map((value, key) => (\n                            <option key={key}>{value}</option>\n                        ))}\n                    </select>\n                    <button onClick={() => handleStart()}>Start</button>\n                </div>\n                <div className=\"container__assets__list\">\n                    {processes.map((value, key) => (\n                        <ProcessElt key={key} name={value.name} running={value.running}/>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}