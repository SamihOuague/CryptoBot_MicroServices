{"ast":null,"code":"import _regeneratorRuntime from\"/home/souaguen/workdir/CryptoBot_MicroServices/client-2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/souaguen/workdir/CryptoBot_MicroServices/client-2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";export var listAsyncThunk=createAsyncThunk(\"main/list\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(process.env.REACT_APP_API_URL),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\",\"Authorization\":\"Barear \".concat(localStorage.getItem(\"token\"))}});case 2:_context.next=4;return _context.sent.json();case 4:response=_context.sent;return _context.abrupt(\"return\",response);case 6:case\"end\":return _context.stop();}}},_callee);})));export var startProcessAsyncThunk=createAsyncThunk(\"main/start\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/start\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\",\"Authorization\":\"Barear \".concat(localStorage.getItem(\"token\"))},body:JSON.stringify(data)});case 2:_context2.next=4;return _context2.sent.json();case 4:response=_context2.sent;return _context2.abrupt(\"return\",response);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());export var getAssetsAsyncThunk=createAsyncThunk(\"main/getAssets\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/list-assets\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\",\"Authorization\":\"Barear \".concat(localStorage.getItem(\"token\"))}});case 2:_context3.next=4;return _context3.sent.json();case 4:response=_context3.sent;return _context3.abrupt(\"return\",response);case 6:case\"end\":return _context3.stop();}}},_callee3);})));export var mainSlice=createSlice({name:\"main\",initialState:{processes:[],pending:false,assets:[],apiNotSet:false},extraReducers:function extraReducers(builder){builder.addCase(listAsyncThunk.fulfilled,function(state,action){if(action.payload.processes){state.processes=action.payload.processes;state.apiNotSet=false;}state.pending=false;}).addCase(listAsyncThunk.pending,function(state){state.pending=true;}).addCase(listAsyncThunk.rejected,function(state){state.pending=false;state.processes=[];});builder.addCase(startProcessAsyncThunk.fulfilled,function(state,action){if(action.payload.name)state.processes.push(action.payload);state.pending=false;}).addCase(startProcessAsyncThunk.pending,function(state){state.pending=true;}).addCase(startProcessAsyncThunk.rejected,function(state){state.pending=false;});builder.addCase(getAssetsAsyncThunk.fulfilled,function(state,action){if(!action.payload.msg){state.assets=action.payload;state.apiNotSet=false;}else state.apiNotSet=true;}).addCase(getAssetsAsyncThunk.pending,function(state){state.pending=true;}).addCase(getAssetsAsyncThunk.rejected,function(state){state.pending=false;});}});export default mainSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","listAsyncThunk","fetch","process","env","REACT_APP_API_URL","method","headers","localStorage","getItem","json","response","startProcessAsyncThunk","data","body","JSON","stringify","getAssetsAsyncThunk","mainSlice","name","initialState","processes","pending","assets","apiNotSet","extraReducers","builder","addCase","fulfilled","state","action","payload","rejected","push","msg","reducer"],"sources":["/home/souaguen/workdir/CryptoBot_MicroServices/client-2/src/app/features/main/mainSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\n\nexport const listAsyncThunk = createAsyncThunk(\"main/list\", async () => {\n    let response = await (await fetch(`${process.env.REACT_APP_API_URL}`, {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\",\n            \"Authorization\": `Barear ${localStorage.getItem(\"token\")}`,\n        }\n    })).json();\n    return response;\n});\n\nexport const startProcessAsyncThunk = createAsyncThunk(\"main/start\", async (data) => {\n    let response = await (await fetch(`${process.env.REACT_APP_API_URL}/start`, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\",\n            \"Authorization\": `Barear ${localStorage.getItem(\"token\")}`,\n        },\n        body: JSON.stringify(data),\n    })).json();\n    return response;\n});\n\nexport const getAssetsAsyncThunk = createAsyncThunk(\"main/getAssets\", async () => {\n    let response = await (await fetch(`${process.env.REACT_APP_API_URL}/list-assets`, {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\",\n            \"Authorization\": `Barear ${localStorage.getItem(\"token\")}`,\n        }\n    })).json();\n    return response;\n});\n\nexport const mainSlice = createSlice({\n    name: \"main\",\n    initialState: {\n        processes: [],\n        pending: false,\n        assets: [],\n        apiNotSet: false,\n    },\n    extraReducers: (builder) => {\n        builder.addCase(listAsyncThunk.fulfilled, (state, action) => {\n            if (action.payload.processes) {\n                state.processes = action.payload.processes;\n                state.apiNotSet = false;\n            }\n            state.pending = false;\n        }).addCase(listAsyncThunk.pending, (state) => {\n            state.pending = true;\n        }).addCase(listAsyncThunk.rejected, (state) => {\n            state.pending = false;\n            state.processes = []\n        });\n\n        builder.addCase(startProcessAsyncThunk.fulfilled, (state, action) => {\n            if (action.payload.name) state.processes.push(action.payload);\n            state.pending = false;\n        }).addCase(startProcessAsyncThunk.pending, (state) => {\n            state.pending = true;\n        }).addCase(startProcessAsyncThunk.rejected, (state) => {\n            state.pending = false;\n        });\n\n        builder.addCase(getAssetsAsyncThunk.fulfilled, (state, action) => {\n            if (!action.payload.msg) { \n                state.assets = action.payload; \n                state.apiNotSet = false;\n            } else state.apiNotSet = true;\n        }).addCase(getAssetsAsyncThunk.pending, (state) => {\n            state.pending = true;\n        }).addCase(getAssetsAsyncThunk.rejected, (state) => {\n            state.pending = false;\n        });\n\n    }\n});\n\nexport default mainSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module"}